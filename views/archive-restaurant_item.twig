{#<?php#}
{% extends "main.twig" %}

{% block content %}

<ul id="menu-filter">
	<li><a href="#" data-filter="*" class="selected">All</a></li>
	{% for menu_section in menu_sections %}
	<li><a href="#" data-filter=".{{ menu_section.name|lower }}">{{ menu_section.name }}</a></li>
	{% endfor %}
</ul>

<div id="menu-wrapper" class="js-isotope" data-isotope-options='{ "itemSelector": ".item" }'>
	{% for post in posts %}
	<div class="{% for term in post.terms('restaurant_item_menu_section') %}{{ term.name|lower }}{% endfor %} col-md-6 menu_item_wrapper item">
		<div class="media">
			{% if post.thumbnail %}
			<div class="media-left">
				<a href="{{ post.permalink }}">
					<img class="media-object" src="{{ post.get_thumbnail.get_src|resize(64, 64, 'center') }}" alt="{{ post.title }}" />
				</a>
			</div>
			{% endif %}
			<div class="media-body">
				<h3 class="media-heading">
					<span class="dish_name"><a href="{{ post.permalink }}">{{ post.title }}</a></span>

					<span class="price_dots"></span>
					<span class="price">{{ currency }}{{ post.get_field('_restaurant_item_price') }}</span>

				</h3>
				{{ post.content }}


					{% for term in post.terms('restaurant_tag') %}
					<div class="menu_item_tags">
						<span class="menu_tag"><i class="fa fa-cutlery"></i> <a href="{{term.link}}">{{term.name}}</a></span>
					</div>
					{% endfor %}

			</div>
		</div>
	</div>
	{% endfor %}
</div>
<div class="clearfix"></div>

<script>
jQuery(function ($) {

	var $container = $('#menu-wrapper');
	$container.isotope({
		itemSelector : '.item',
		layoutMode : 'masonry'
	});

	var $optionSets = $('#menu-filter'),
	$optionLinks = $optionSets.find('a');

	$optionLinks.click(function(){
	var $this = $(this);

	if ( $this.hasClass('selected') ) {
	  return false;
	}
	var $optionSet = $this.parents('#menu-filter');
	$optionSets.find('.selected').removeClass('selected');
	$this.addClass('selected');

	 var selector = $(this).attr('data-filter');
	$container.isotope({ filter: selector });

	return false;
	});

});
</script>
{% endblock %}
